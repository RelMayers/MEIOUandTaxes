Yuan_Degenerate = {
	change_technology_group = steppestech
	change_unit_type = steppestech
	remove_country_modifier = mongol_xingsheng
	clr_country_flag = mandate_of_heaven_claimed
	clr_country_flag = China_ClaimForeign
	add_prestige = -15
	add_legitimacy = -5

	if = {
		limit = {
			NOT = { is_year = 1400 }
			NOT = { exists = MXI }
			any_owned_province = {
				OR = {
					region = east_manchuria_region
					region = west_manchuria_region
					region = korea_region
				}
				NOT = { area = argun_area }
			}
		}
		if = {
			limit = {
				owns = 3259
			}
			add_core = MXI
		}
		every_owned_province = {
			limit = {
				isValidProv = yes
				OR = {
					region = east_manchuria_region
					region = west_manchuria_region
					region = korea_region
				}
				NOT = { area = argun_area }
			}
			add_core = MXI
			remove_core = YUA
		}
		release = MXI
		MXI = {
			hidden_effect = { steppe_effect = yes }
			define_ruler = {
				name = "Nahacu"
				dynasty = "Jalaid"
				culture = uriankhai
				mil = 6
				adm = 3
				dip = 4
				age = 45
			}
			Effect_set_capital = { target=3259 }
			Stab_Add2 = yes
			add_horde_unity = 50
			Public_ChangePowerbrokerLoyaltyTooltipProv = { Powerbroker=TR Amount=15 }
			change_primary_culture = uriankhai
			change_religion = tengri_pagan
			if = {
				limit = {
					exists = yes
				}
				country_event = { id = Init.2 }
			}
			every_country = {
				limit = {
					culture_group = jurchen_group
					NOT = { tag = MGH }
					NOT = { tag = CHG }
					NOT = { tag = TIM }
					NOT = { tag = GGK }
					NOT = { tag = SYG }
					NOT = { tag = JOL }
					is_free_or_tributary_trigger = yes
				}
				country_event = { id = red_turban.35 days = 1 }
			}
			every_country = {
				limit = {
					isValidCountry = yes
					ai = yes

					capital_scope = {
						OR = {
							region = west_manchuria_region
							region = east_manchuria_region
							region = outer_mongolia_region
							region = inner_mongolia_region
							region = korea_region
						}
					}
					OR = {
						culture_group = nivkh_group
						culture_group = jurchen_group
						culture_group = altaic
						culture_group = tartar_group
						culture_group = old_turkic
						culture_group = tungusic
						primary_culture = korean
					}
				}
				add_truce_with = PREV
			}
		}
	}
	every_subject_country = {
		limit = {
			OR = {
				is_subject_of_type = warlord
				AND = {
					is_subject_of_type = muscovite_tributary_state
					OR = {
						culture_group = nivkh_group
						culture_group = jurchen_group
					}
				}
				is_subject_of_type = daimyo_vassal
				tag = JOL
			}
			isValidCountry = yes
		}
		grant_independence_effect = yes
	}
}
Yuan_DissolveSetup = {
	set_global_flag = YUA_Cleanup
	every_subject_country = {
		limit = {
			isValidCountry = yes
		}
		grant_independence = yes
	}
	every_province = {
		limit = {
			isValidProv = yes
			is_core = YUA
		}
		remove_core = YUA
	}
	every_province = {
		limit = {
			isValidProv = yes
			culture = mongol
			NOT = { region = inner_mongolia_region }
			NOT = {
				OR = {
					province_id = 3268
					province_id = 4713
					province_id = 4714
					province_id = 5131
					province_id = 4729
					province_id = 2253
					area = ordos_area
				}
			}
		}
		add_core = KHA
	}
	ordos_area = {
		limit = {
			is_core = ORD
		}
		change_culture = ordos
	}
	2265 = {
		change_culture = kharchin
		change_religion = tengri_pagan
	}
	4713 = {
		change_religion = tengri_pagan
	}
	4714 = {
		change_religion = tengri_pagan
	}
	4818 = {
		add_core = HMI
	}
	2156 = {
		add_core = HMI
	}
	2743 = {
		add_core = HMI
	}
	4819 = {
		add_core = HMI
	}
	4817 = {
		add_core = HMI
	}
	2119 = {
		add_core = HMI
	}
	if = {
		limit = {
			NOT = { exists = TMD }
			any_owned_province = { is_core = TMD }
		}
		release = TMD
		hidden_effect = {
			TMD = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = ORD }
			any_owned_province = { is_core = ORD }
		}
		release = ORD
		hidden_effect = {
			ORD = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = SUD }
			any_owned_province = { is_core = SUD }
		}
		release = SUD
		hidden_effect = {
			SUD = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = KHN }
			any_owned_province = { is_core = KHN }
		}
		release = KHN
		hidden_effect = {
			KHN = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = ONN }
			any_owned_province = { is_core = ONN }
		}
		release = ONN
		hidden_effect = {
			ONN = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = NAI }
			any_owned_province = { is_core = NAI }
		}
		release = NAI
		hidden_effect = {
			NAI = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = BRN }
			any_owned_province = { is_core = BRN }
		}
		release = BRN
		hidden_effect = {
			BRN = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JAL }
			any_owned_province = { is_core = JAL }
		}
		release = JAL
		hidden_effect = {
			JAL = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = KHR }
			any_owned_province = { is_core = KHR }
		}
		release = KHR
		hidden_effect = {
			KHR = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = GLS }
			any_owned_province = { is_core = GLS }
		}
		release = GLS
		hidden_effect = {
			GLS = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = MXI }
			any_owned_province = { is_core = MXI }
		}
		release = MXI
		hidden_effect = {
			MXI = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = DRB }
			any_owned_province = { is_core = DRB }
		}
		release = DRB
		hidden_effect = {
			DRB = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = BGA }
			any_owned_province = { is_core = BGA }
		}
		release = BGA
		hidden_effect = {
			BGA = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = BRT }
			any_owned_province = { is_core = BRT }
		}
		release = BRT
		hidden_effect = {
			BRT = {
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = MYR }
			any_owned_province = { is_core = MYR }
		}
		release = MYR
		hidden_effect = {
			MYR = {
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = ORQ }
			any_owned_province = { is_core = ORQ }
		}
		release = ORQ
		hidden_effect = {
			ORQ = {
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = OIR }
			any_owned_province = { is_core = OIR }
		}
		release = OIR
		hidden_effect = {
			OIR = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = HMI }
			any_owned_province = { is_core = HMI }
		}
		release = HMI
		hidden_effect = {
			HMI = {
				steppe_effect = yes
				change_religion = tengri_pagan
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JOL }
			any_owned_province = { is_core = JOL }
		}
		release = JOL
		hidden_effect = {
			JOL = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JHA }
			any_owned_province = { is_core = JHA }
		}
		release = JHA
		hidden_effect = {
			JHA = {
				jurchen_effect = yes
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JHI }
			any_owned_province = { is_core = JHI }
		}
		release = JHI
		hidden_effect = {
			JHI = {
				jurchen_effect = yes
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JLA }
			any_owned_province = { is_core = JLA }
		}
		release = JLA
		hidden_effect = {
			JLA = {
				jurchen_effect = yes
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JYE }
			any_owned_province = { is_core = JYE }
		}
		release = JYE
		hidden_effect = {
			JYE = {
				jurchen_effect = yes
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JTU }
			any_owned_province = { is_core = JTU }
		}
		release = JTU
		hidden_effect = {
			JTU = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JOD }
			any_owned_province = { is_core = JOD }
		}
		release = JOD
		hidden_effect = {
			JOD = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JHO }
			any_owned_province = { is_core = JHO }
		}
		release = JHO
		hidden_effect = {
			JHO = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = JHU }
			any_owned_province = { is_core = JHU }
		}
		release = JHU
		hidden_effect = {
			JHU = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = MJZ }
			any_owned_province = { is_core = MJZ }
		}
		release = MJZ
		hidden_effect = {
			MJZ = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = MWK }
			any_owned_province = { is_core = MWK }
		}
		release = MWK
		hidden_effect = {
			MWK = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = MHX }
			any_owned_province = { is_core = MHX }
		}
		release = MHX
		hidden_effect = {
			MHX = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = MUD }
			any_owned_province = { is_core = MUD }
		}
		release = MUD
		hidden_effect = {
			MUD = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = MHR }
			any_owned_province = { is_core = MHR }
		}
		release = MHR
		hidden_effect = {
			MHR = {
				change_religion = mahayana
				if = {
					limit = {
						exists = yes
					}
					country_event = { id = Init.2 }
				}
			}
		}
	}
	Effect_set_capital = { target=4743 }
	every_owned_province = {
		limit = {
			isValidProv = yes
		}
		add_core = KHA
	}
	if = {
		limit = {
			owns = 4743
		}
		4743 = { cede_province = KHA }
	}
	random_province = {
		limit = {
			owned_by = YUA
		}
		cede_province = KHA
	}
	if = {
		limit = {
			owns = 4198
		}
		set_capital = 4198
	}
	else = {
		random_province = {
			limit = {
				owned_by = YUA
				NOT = { province_id = 4743 }
			}
			set_capital = PREV
		}
	}
	every_province = {
		limit = {
			owned_by = YUA
			is_capital = no
		}
		cede_province = KHA
	}
	KHA = {
		steppe_effect = yes
		Effect_set_capital = { target=4743 }
		change_primary_culture = mongol
		change_religion = tengri_pagan
		add_country_modifier = { name = Northern_Yuan_mod duration = -1 }
		define_ruler = {
			name = "Jorightu"
			dynasty = "Borjigin"
			culture = uriankhai
			mil = 2
			adm = 2
			dip = 3
			age = 30
		}
		#event doesn't exist
		#every_country = {
		#	limit = {
		#		OR = {
		#			culture_group = altaic
		#			primary_culture = oroqen
		#		}
		#		NOT = { tag = MGH }
		#		NOT = { tag = CHG }
		#		NOT = { tag = TIM }
		#		NOT = { tag = GGK }
		#		NOT = { tag = SYG }
		#		OR = {
		#			NOT = { tag = MXI }
		#			MXI = { NOT = { any_owned_province = { NOT = { culture = uriankhai } } } }
		#		}
		#		OR = {
		#			capital_scope = { continent = asia }
		#			capital_scope = { continent = north_asia }
		#			tag = OIR
		#			tag = HMI
		#		}
		#		is_free_or_tributary_trigger = yes
		#	}
		#	country_event = { id = red_turban.31 days = 1 }
		#}
	}
	KHA = {
		country_event = { id = Init.2 }
		country_event = { id = red_turban.7 days = 1 }
	}
	if = {
		limit = { ai = no }
		switch_tag = KHA
	}
}