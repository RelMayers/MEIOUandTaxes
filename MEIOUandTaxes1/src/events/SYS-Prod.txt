namespace = POP_Prod

country_event = {
	id = POP_Prod.001
    title = POP_Prod.001.t
    desc = POP_Prod.001.d
	picture = MEIOU_AND_TAXES_eventPicture

    is_triggered_only = yes
	
	option = {
        name = POP_Prod.001.1
		
		custom_tooltip = Prod_Req_1
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_1 = yes
					Prod_NotHasProd = { Prod = 1 }				
				}
				Public_AddProduce = { prod = 1 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Agriculture Amount=5 Cap=yes Broker1=SF Broker2=NO }                
            }
		}
    }
    option = {
        name = POP_Prod.001.2

        custom_tooltip = Prod_Req_2
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					NOT = { has_province_flag = City_Present }				
				}
				Public_AddProduce = { prod = 24 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Industrial Amount=5 Broker1=RE Broker2=BG }

				Public_AddProduce = { prod = 25 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Industrial Amount=5 Broker1=RE Broker2=BG }

				Public_AddProduce = { prod = 26 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Industrial Amount=5 Broker1=RE Broker2=BG }
				
				if = {
					limit = {
						Prod_Can_27 = yes
					}
					Public_AddProduce = { prod = 27 size = 5 soph = 100 wealth = 0 }
					Infra_AddPrp = { Type=Industrial Amount=5 Broker1=RE Broker2=BG }
				}
				Public_AddProduce = { prod = 32 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Commercial Amount=5 Broker1=BG Broker2=RE }

				change_key = { lhs = Building_IndustrialWealth value = 10 }
				change_key = { lhs = Building_CommercialWealth value = 10 } 
			}
			add_treasury = -75
		}
    }
    option = {
        name = POP_Prod.001.6

        custom_tooltip = Prod_Req_6
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_6 = yes
					Prod_NotHasProd = { Prod = 6 }				
				}
				Public_AddProduce = { prod = 6 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Fishery Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.7

        custom_tooltip = Prod_Req_7
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_7 = yes
					Prod_NotHasProd = { Prod = 7 }				
				}
				Public_AddProduce = { prod = 7 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Agriculture Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.8

        custom_tooltip = Prod_Req_8
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_8 = yes
					Prod_NotHasProd = { Prod = 8 }				
				}
				Public_AddProduce = { prod = 8 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Agriculture Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.9

        custom_tooltip = Prod_Req_9
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_9 = yes
					Prod_NotHasProd = { Prod = 9 }				
				}
				Public_AddProduce = { prod = 9 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Extraction Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.10

        custom_tooltip = Prod_Req_10
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_10 = yes
					Prod_NotHasProd = { Prod = 10 }				
				}
				Public_AddProduce = { prod = 10 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Extraction Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.11

        custom_tooltip = Prod_Req_11
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_11 = yes
					Prod_NotHasProd = { Prod = 11 }				
				}
				Public_AddProduce = { prod = 11 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Agriculture Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.12

        custom_tooltip = Prod_Req_12
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_12 = yes
					Prod_NotHasProd = { Prod = 12 }				
				}
				Public_AddProduce = { prod = 12 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Agriculture Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.13

        custom_tooltip = Prod_Req_13
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_13 = yes
					Prod_NotHasProd = { Prod = 13 }				
				}
				Public_AddProduce = { prod = 13 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Forestry Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.14

        custom_tooltip = Prod_Req_14
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_14 = yes
					Prod_NotHasProd = { Prod = 14 }				
				}
				clr_province_flag = no_mines
				
				Public_AddProduce = { prod = 14 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Extraction Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.15

        custom_tooltip = Prod_Req_15
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_15 = yes
					Prod_NotHasProd = { Prod = 15 }				
				}
				clr_province_flag = no_mines
				
				Public_AddProduce = { prod = 15 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Extraction Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.16

       custom_tooltip = Prod_Req_16
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_16 = yes
					Prod_NotHasProd = { Prod = 16 }				
				}
				clr_province_flag = no_mines
				trigger_switch = {
					on_trigger = has_province_flag
					gems = {
						add_permanent_province_modifier = {
							name = gems_1
							duration = -1
						}
					}
					obsidian = {
						add_permanent_province_modifier = {
							name = obsidian_1
							duration = -1
						}
					}
				}
		
				Public_AddProduce = { prod = 16 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Extraction Amount=5 Cap=yes Broker1=SF Broker2=BU }                
			}
		}
    }
    option = {
        name = POP_Prod.001.17

        custom_tooltip = Prod_Req_17
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_17 = yes
					Prod_NotHasProd = { Prod = 17 }				
				}
				clr_province_flag = no_mines
				
				Public_AddProduce = { prod = 17 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Extraction Amount=5 Cap=yes Broker1=SF Broker2=BU }			
				add_permanent_province_modifier = {
					name = gold_1
					duration = -1
				}
			}
		}
    }
    option = {
        name = POP_Prod.001.18

        custom_tooltip = Prod_Req_18
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_18 = yes
					Prod_NotHasProd = { Prod = 18 }				
				}
				clr_province_flag = no_mines
				
				Public_AddProduce = { prod = 18 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Extraction Amount=5 Cap=yes Broker1=SF Broker2=BU }               
				
				add_permanent_province_modifier = {
					name = silver_1
					duration = -1
				}
			}
		}
    }
    option = {
        name = POP_Prod.001.19

        custom_tooltip = Prod_Req_19
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_19 = yes
				}
				Public_AddProduce = { prod = 19 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Agriculture Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.20

        custom_tooltip = Prod_Req_20
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_20 = yes
					Prod_NotHasProd = { Prod = 20 }				
				}
				Public_AddProduce = { prod = 20 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Agriculture Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.21

        custom_tooltip = Prod_Req_21
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_21 = yes
					Prod_NotHasProd = { Prod = 21 }				
				}
				Public_AddProduce = { prod = 21 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Forestry Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.41

        custom_tooltip = Prod_Req_41
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_41 = yes
					Prod_NotHasProd = { Prod = 41 }				
				}
				clr_province_flag = no_mines
				
				Public_AddProduce = { prod = 41 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Extraction Amount=1 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }
    option = {
        name = POP_Prod.001.42

        custom_tooltip = Prod_Req_42
		
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_flag = UI_Select
					
					Prod_Can_42 = yes
					Prod_NotHasProd = { Prod = 42 }				
				}
				Public_AddProduce = { prod = 42 size = 5 soph = 100 wealth = 0 }
				Infra_AddPrp = { Type=Agriculture Amount=5 Cap=yes Broker1=SF Broker2=NO }                
			}
		}
    }

    option = {
        name = exit
		highlight = yes
    }
}

#Find province that can upgrade
country_event = {
	id = POP_Prod.10
	title = POP_Prod.10.t
	desc = POP_Prod.10.d
	picture = UNIVERSITY_eventPicture

	is_triggered_only = yes
    hidden = yes

	trigger = {
		tag = AAA
	}
	
	immediate = {
        hidden_effect = {
			tradenode_centers = {
				every_trade_node_member_province = {
					if = {
						limit = {
							has_province_flag = Industry_CanUpgrade
							NOT = { has_province_flag = Industry_CanNotUpgrade }
						}
						province_event = { id = POP_Prod.11 }
					}
				}
			}
		}
	}
    option = {
        name = no_localisation
    }
}
#Present options for Upgrade
province_event = {
	id = POP_Prod.11
	title = POP_Prod.11.t
	desc = POP_Prod.11.d
	picture = UNIVERSITY_eventPicture

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			save_event_target_as = upgrade_province_event_target
			OpenSlotsUrbanDiff = yes
		}
	}
	# Public_Tmp1 Consumer Balance
	# Public_Tmp2 Military Balance
	# Public_Tmp3 Naval Balance
	# Public_Tmp4 Industrial Balance
	# Public_Tmp5 Luxury
	
	###Houseware Branches
	#Carpentry
	option = {
		name = POP_Prod.11.opta
		goto = ROOT
		trigger = {
			NOT = { has_province_flag = Industry_28Present }
			NOT = { has_province_flag = Industry_33Present }
			NOT = { has_province_flag = Industry_36Present }
			has_province_flag = Industry_24Present
		}
		hidden_effect = {
			Public_ChangeProduce = { TargetID=28 FromID=24 }
			clr_province_flag = Industry_CanUpgrade
		}
		ai_chance = {
			factor = 1
			modifier = {
				check_key = { lhs = Public_Tmp4 value = 1 } # Means 100% demand gap
				factor = 2
			}
			modifier = {
				check_key = { lhs = Public_Tmp4 value = 2 }
				factor = 2
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp4 value = 0.5 } } # means 100% more prod than demand
				factor = 0.5
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp4 value = 0.33 } }
				factor = 0.5
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 125 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 150 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 175 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 200 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 225 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 250 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 275 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 300 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 325 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 350 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 375 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu28 value = 400 }
				factor = 2
			}
		}
	}
	#Furniture
	option = {
		name = POP_Prod.11.optb
		goto = ROOT
		trigger = {
			NOT = { has_province_flag = Industry_28Present }
			NOT = { has_province_flag = Industry_33Present }
			NOT = { has_province_flag = Industry_36Present }
			has_province_flag = Industry_24Present
		}
		hidden_effect = {
			Public_ChangeProduce = { TargetID=33 FromID=24 }
			clr_province_flag = Industry_CanUpgrade
		}
		ai_chance = {
			factor = 1
			modifier = {
				check_key = { lhs = Public_Tmp6 value = 4 } # Pricediff Raw/Fiber
				factor = 0.1
			}
			modifier = {
				check_key = { lhs = Public_Tmp1 value = 1 } # Means 100% demand gap
				factor = 2
			}
			modifier = {
				check_key = { lhs = Public_Tmp1 value = 2 }
				factor = 2
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp1 value = 0.5 } } # means 100% more prod than demand
				factor = 0.5
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp1 value = 0.33 } }
				factor = 0.5
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 125 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 150 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 175 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 200 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 225 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 250 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 275 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 300 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 325 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 350 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 375 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu33 value = 400 }
				factor = 2
			}
		}
	}
	#Tableware
	option = {
		name = POP_Prod.11.optc
		goto = ROOT
		trigger = {
			NOT = { has_province_flag = Industry_28Present }
			NOT = { has_province_flag = Industry_33Present }
			NOT = { has_province_flag = Industry_36Present }
			has_province_flag = Industry_24Present
			OR = {
				continent = asia
				superregion = japan_superregion
				region = vietnam_region
				area_for_scope_province = {
					type = any
					OR = {
						has_province_flag = pm
						has_province_flag = ivory
						has_province_flag = asian_ivory
						has_province_flag = westafrican_ivory
					}
				}
			}
		}
		hidden_effect = {
			Public_ChangeProduce = { TargetID=36 FromID=24 }
			clr_province_flag = Industry_CanUpgrade
		}
		ai_chance = {
			factor = 2
			modifier = {
				check_key = { lhs = Public_Tmp5 value = 1 } # Means 100% demand gap
				factor = 2
			}
			modifier = {
				check_key = { lhs = Public_Tmp5 value = 2 }
				factor = 2
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp5 value = 0.5 } } # means 100% more prod than demand
				factor = 0.5
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp5 value = 0.33 } }
				factor = 0.5
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 125 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 150 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 175 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 200 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 225 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 250 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 275 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 300 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 325 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 350 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 375 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu36 value = 400 }
				factor = 2
			}
		}
	}
	###Textile Branches
	#Tailors
	option = {
		name = POP_Prod.11.optd
		goto = ROOT
		trigger = {
			NOT = { has_province_flag = Industry_34Present }
			NOT = { has_province_flag = Industry_39Present }
			has_province_flag = Industry_25Present
		}
		hidden_effect = {
			Public_ChangeProduce = { TargetID=34 FromID=25 }
			clr_province_flag = Industry_CanUpgrade
		}
		ai_chance = {
			factor = 1
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp6 value = 2 } } # Pricediff Raw/Fiber
				factor = 0.1
			}
			modifier = {
				check_key = { lhs = Public_Tmp1 value = 1 } # Means 100% demand gap
				factor = 2
			}
			modifier = {
				check_key = { lhs = Public_Tmp1 value = 2 }
				factor = 2
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp1 value = 0.5 } } # means 100% more prod than demand
				factor = 0.5
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp1 value = 0.33 } }
				factor = 0.5
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 125 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 150 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 175 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 200 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 225 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 250 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 275 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 300 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 325 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 350 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 375 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu34 value = 400 }
				factor = 2
			}
		}
	}
	#Luxury Cloth
	option = {
		name = POP_Prod.11.opte
		goto = ROOT
		trigger = {
			NOT = { has_province_flag = Industry_34Present }
			NOT = { has_province_flag = Industry_39Present }
			has_province_flag = Industry_25Present
		}
		hidden_effect = {
			Public_ChangeProduce = { TargetID=39 FromID=25 }
			clr_province_flag = Industry_CanUpgrade
		}
		ai_chance = {
			factor = 1
			modifier = {
				check_key = { lhs = Public_Tmp5 value = 1 } # Means 100% demand gap
				factor = 2
			}
			modifier = {
				check_key = { lhs = Public_Tmp5 value = 2 }
				factor = 2
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp5 value = 0.5 } } # means 100% more prod than demand
				factor = 0.5
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp5 value = 0.33 } }
				factor = 0.5
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 125 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 150 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 175 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 200 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 225 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 250 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 275 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 300 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 325 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 350 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 375 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu39 value = 400 }
				factor = 2
			}
		}
	}
	###Metalworking Branches
	#Machinery
	option = {
		name = POP_Prod.11.optf
		goto = ROOT
		trigger = {
			NOT = { has_province_flag = Industry_35Present }
			NOT = { has_province_flag = Industry_40Present }
			has_province_flag = Industry_26Present
			check_key = { lhs = TN_ProvSply41 value = 1 } #Knowledge
		}
		hidden_effect = {
			Public_ChangeProduce = { TargetID=35 FromID=26 }
			clr_province_flag = Industry_CanUpgrade
		}
		ai_chance = {
			factor = 1
			modifier = {
				check_key = { lhs = Public_Tmp4 value = 1 } # Means 100% demand gap
				factor = 2
			}
			modifier = {
				check_key = { lhs = Public_Tmp4 value = 2 }
				factor = 2
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp4 value = 0.5 } } # means 100% more prod than demand
				factor = 0.5
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp4 value = 0.33 } }
				factor = 0.5
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 125 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 150 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 175 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 200 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 225 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 250 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 275 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 300 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 325 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 350 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 375 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu35 value = 400 }
				factor = 2
			}
		}
	}
	#Armaments
	option = {
		name = POP_Prod.11.optg
		goto = ROOT
		trigger = {
			NOT = { has_province_flag = Industry_35Present }
			NOT = { has_province_flag = Industry_40Present }
			has_province_flag = Industry_26Present
			area_for_scope_province = {
				type = any
				OR = {
					has_province_flag = m
					has_province_flag = coal
				}
			}
		}
		hidden_effect = {
			Public_ChangeProduce = { TargetID=40 FromID=26 }
			clr_province_flag = Industry_CanUpgrade
		}
		ai_chance = {
			factor = 2
			modifier = {
				check_key = { lhs = Public_Tmp2 value = 1 } # Means 100% demand gap
				factor = 2
			}
			modifier = {
				check_key = { lhs = Public_Tmp2 value = 2 }
				factor = 2
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp2 value = 0.5 } } # means 100% more prod than demand
				factor = 0.5
			}
			modifier = {
				NOT = { check_key = { lhs = Public_Tmp2 value = 0.33 } }
				factor = 0.5
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 125 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 150 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 175 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 200 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 225 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 250 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 275 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 300 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 325 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 350 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 375 }
				factor = 2
			}
			modifier = {
				check_key = { lhs = SkillCapIndu40 value = 400 }
				factor = 2
			}
		}
	}
	#Emergency
	option = {
		name = POP_Prod.11.optz
		goto = ROOT
		hidden_effect = {
			set_province_flag = Industry_CanNotUpgrade
		}
	}
	after = {
        #unset keys
		set_key = { lhs = Public_Tmp1 value = 0 }
		set_key = { lhs = Public_Tmp2 value = 0 }
		set_key = { lhs = Public_Tmp3 value = 0 }
		set_key = { lhs = Public_Tmp4 value = 0 }
		set_key = { lhs = Public_Tmp5 value = 0 }
		set_key = { lhs = Public_Tmp6 value = 0 }
		
        if = {
            limit = {
                NOT = { has_province_flag = TN_SectorCent }
            }
			set_key = { lhs = TN_SectorSply21 value = 0 }
			set_key = { lhs = TN_SectorSply22 value = 0 }
			set_key = { lhs = TN_SectorSply23 value = 0 }
			set_key = { lhs = TN_SectorSply24 value = 0 }
			set_key = { lhs = TN_SectorSply25 value = 0 }
			
			set_key = { lhs = TN_SectorDmnd21 value = 0 }
			set_key = { lhs = TN_SectorDmnd22 value = 0 }
			set_key = { lhs = TN_SectorDmnd23 value = 0 }
			set_key = { lhs = TN_SectorDmnd24 value = 0 }
			set_key = { lhs = TN_SectorDmnd25 value = 0 }
        }
	}
}
#Find provinces for urban industry resurrection
country_event = {
	id = POP_Prod.12
	title = POP_Prod.12.t
	desc = POP_Prod.12.d
	picture = UNIVERSITY_eventPicture

	is_triggered_only = yes
    hidden = yes

	trigger = {
		tag = AAA
	}
	
	immediate = {
        hidden_effect = {
			tradenode_centers = {
				every_trade_node_member_province = {
					if = {
						limit = {
							OR = {
								has_province_flag = ResurrectIndustry_24
								has_province_flag = ResurrectIndustry_25
								has_province_flag = ResurrectIndustry_26
								has_province_flag = ResurrectIndustry_27
								has_province_flag = ResurrectIndustry_29
								has_province_flag = ResurrectIndustry_30
								has_province_flag = ResurrectIndustry_32
								
							}
						}
						province_event = { id = POP_Prod.13 }
					}
				}
			}
		}
	}
    option = {
        name = no_localisation
    }
}
#Resurrect Industries
province_event = {
	id = POP_Prod.13
	title = POP_Prod.13.t
	desc = POP_Prod.13.d
	picture = UNIVERSITY_eventPicture

	is_triggered_only = yes
	hidden = yes 
	
	immediate = {
		hidden_effect = {
			set_key = { lhs = Modi_Tmp1 which = Building_Industrial }
			multiply_key = { lhs = Modi_Tmp1 value = 0.05 }
			if = {
				limit = {
					NOT = { check_key = { lhs = Modi_Tmp1 value = 5 } }
				}
				set_key = { lhs = Modi_Tmp1 value = 5 }
			}
			set_key = { lhs = Modi_Tmp2 which = Building_Academic }
			multiply_key = { lhs = Modi_Tmp2 value = 0.05 }
			if = {
				limit = {
					NOT = { check_key = { lhs = Modi_Tmp2 value = 5 } }
				}
				set_key = { lhs = Modi_Tmp2 value = 5 }
			}
			set_key = { lhs = Modi_Tmp3 which = Building_Commercial }
			multiply_key = { lhs = Modi_Tmp3 value = 0.05 }
			if = {
				limit = {
					NOT = { check_key = { lhs = Modi_Tmp3 value = 5 } }
				}
				set_key = { lhs = Modi_Tmp3 value = 5 }
			}			
			if = {
				limit = {
					has_province_flag = ResurrectIndustry_24
				}
				Effect_OpenProdVar = { IndustryID=24 Soph=100 Size=Modi_Tmp1 }
				clr_province_flag = ResurrectIndustry_24
			}
			if = {
				limit = {
					has_province_flag = ResurrectIndustry_25
				}
				Effect_OpenProdVar = { IndustryID=25 Soph=100 Size=Modi_Tmp1 }
				clr_province_flag = ResurrectIndustry_25
			}
			if = {
				limit = {
					has_province_flag = ResurrectIndustry_26
				}
				Effect_OpenProdVar = { IndustryID=26 Soph=100 Size=Modi_Tmp1 }
				clr_province_flag = ResurrectIndustry_26
			}
			if = {
				limit = {
					has_province_flag = ResurrectIndustry_27
				}
				Effect_OpenProdVar = { IndustryID=27 Soph=100 Size=Modi_Tmp1 }
				clr_province_flag = ResurrectIndustry_27
			}
			if = {
				limit = {
					has_province_flag = ResurrectIndustry_29
				}
				Effect_OpenProdVar = { IndustryID=29 Soph=100 Size=Modi_Tmp2 }
				clr_province_flag = ResurrectIndustry_29
			}
			if = {
				limit = {
					has_province_flag = ResurrectIndustry_30
				}
				Effect_OpenProdVar = { IndustryID=30 Soph=100 Size=Modi_Tmp2 }
				clr_province_flag = ResurrectIndustry_30
			}
			if = {
				limit = {
					has_province_flag = ResurrectIndustry_32
				}
				Effect_OpenProdVar = { IndustryID=32 Soph=100 Size=Modi_Tmp3 }
				clr_province_flag = ResurrectIndustry_32
			}
			set_key = { lhs = Modi_Tmp1 value = 0 }
			set_key = { lhs = Modi_Tmp2 value = 0 }
			set_key = { lhs = Modi_Tmp3 value = 0 }
		}
	}
	
    option = {
        name = no_localisation
    }
}